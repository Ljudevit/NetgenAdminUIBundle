{% extends 'NetgenMoreBundle::pagelayout_resolver.html.twig' %}

{% if module_result is not defined %}
    {% set module_result = ezpublish.legacy.all %}
{% endif %}

{# PERSISTENT VARIABLE #}

{% set content_info = null %}
{% if ezpublish.legacy.has( 'content_info' ) %}
    {% set content_info = ezpublish.legacy.get( 'content_info' ) %}
{% endif %}

{% if module_result.content_info is defined %}
    {% set content_info = module_result.content_info %}
{% endif %}

{% set persistent_variable = null %}
{% if content_info.persistent_variable is defined %}
    {% set persistent_variable = content_info.persistent_variable %}
{% endif %}

{# SHOWING OR HIDING SIDE MENU #}

{% set semantic_path_info = app.request.attributes.get('semanticPathinfo') %}

{% if semantic_path_info starts with '/content/versionview' %}
    {% set show_side_menu = false %}
{% endif %}

{# LEGACY PATH #}

{% set legacy_path_array = ezpublish.legacy.has( 'path' ) ? ezpublish.legacy.get( 'path' ) : [] %}

{% if legacy_path_array is not empty %}
    {% set path_array = [] %}
    {% set root_location_path = path( ezpublish.rootLocation ) %}

    {% for legacy_path_item in legacy_path_array %}
        {% set path_array = path_array|merge( [ {
            url_alias: legacy_path_item.url_alias is defined and legacy_path_item.url_alias is not same as( false ) ?
                root_location_path ~ legacy_path_item.url_alias :
                false,
            url: legacy_path_item.url ? path( 'ez_legacy', { 'module_uri': legacy_path_item.url } ) : false,
            text: legacy_path_item.text
        } ] ) %}
    {% endfor %}
{% elseif module_result is defined and module_result['node_id'] is defined and module_result['node_id'] is not empty %}
    {% set path_array = ngmore_location_path( module_result['node_id'], true ) %}
{% endif %}

{% block content %}
    {{ module_result.content|raw }}
{% endblock %}
